package com.orion.math.function;

import static org.junit.jupiter.api.Assertions.assertTrue;

import com.orion.core.tuple.Pair;
import com.orion.math.function.onevariable.Function1x1;
import com.orion.math.function.onevariable.Function1x1IF;
import com.orion.math.function.onevariable.Function1x1Service;
import com.orion.math.number.ANumber;
import com.orion.math.number.arithmetic.ArithmeticService;
import com.orion.math.number.interval.Interval;
import java.util.Arrays;
import java.util.List;
import org.junit.jupiter.api.Test;

// @RunWith(ConcurrentJUnitRunner.class)
public class FunctionServiceTest
{
    @SuppressWarnings("unchecked")
    @Test
    public void test_add1()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber result = Function1x1Service.add(ANumber.of(2), new Function1x1[]
        {f1, f2});
        assertTrue(ANumber.of(13).equal(result));
    }


    @SuppressWarnings("unchecked")
    @Test
    public void test_add2()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        Function1x1<ANumber, ANumber> result = Function1x1Service.add(f1, f2);
        assertTrue(ANumber.of(19).equal(result.run(ANumber.of(3))));
    }


    @Test
    public void test_getNValuesOfFunctionIncludingXValues()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Interval interval = Interval.of(1, 7);
        ANumber[] expectedXValues = new ANumber[]
        {ANumber.of(1), ANumber.of(4), ANumber.of(7)};
        ANumber[] expectedYValues = new ANumber[]
        {ANumber.of(4), ANumber.of(16), ANumber.of(28)};
        Pair<ANumber[], ANumber[]> expected = Pair.<ANumber[], ANumber[]>of(expectedXValues, expectedYValues);
        Pair<ANumber[], ANumber[]> result = Function1x1Service.getNValuesOfFunctionIncludingXValues(f1, interval, 3);
        assertTrue(expected.equals(result));
    }


    @SuppressWarnings("unchecked")
    @Test
    public void testCompose()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber expected = ANumber.of(20);
        ANumber result = Function1x1Service.compose(ANumber.of(2), new Function1x1[]
        {f1, f2});
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetRootUsingNewtonRaphson1()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        ANumber expected = ANumber.of(-0.5);
        ANumber result = Function1x1Service.getRootUsingNewtonRaphson(f, ANumber.of(0));
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetRootUsingNewtonRaphson2()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (x.multiplyGET(ArithmeticService.getEToThePowerOf(x.doubleGET())));
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        ANumber expected = ANumber.of(
                        "0.00000000000000000000000000000000000000896359220531974969196626724943182572330584991475392063451142649178547560122368862661327031423288833822100958071691379101422758173463715170836710996611585493340351462957001514017879800229825969943902882301906024394157440183031350274707238710383374717711399858272921230825295530425735472783318184088930619432654567805294836910535632976223791419805305287831681969877216230937258175376669074609000520135082641900893051904859476523670016690269719741495466596897977411546777918328943870604721367824683973697976497769437063582461976904642447290228954309692420491414132958941209043510985478730658627909843507352517396786408867147896645356263349830007194306492574834297380618508246025261914878084520492870674461294322132724012877393961850740498151803268954935218825558915924509654857746139044441167939505511277964599381334426286020501687712987300032979361424556694611166318847585596057450260114144358418198797509834148075365507091687993511403941961992112365177663214906460981443218036851405836221345281653198988822655547639945744354550770744196981325206698639755068781281246460060592406119036883941011068239538950710586564621550650118572605579661003359352069359686133339429523131018511750420697983295810940922634995164523917283835980021354260141105990260256337542637307795912771044883126356345523970950053679873030556239070861276922710423183605102213011313938154742456003298806997615372642905221294788429940282163855270941348474645670745577574498899329064100026262719466431564571961616060597259413988097774769912278975736722646936101963372557047875489147660127071870908243805563935142267120626474838905133615193361504373051850513230291231844432563840957224679206906382531504856505025936369542614715040300470766613247604575639393210428770263103474049650445551288286423615468921659176887728314286927517326223529483246382970829838576209867963303161405759352296086876563108921744200591414004301943672537024040804769751630144078743110118681111367562380297045791205247187203723214981805426649192059742770441630187019337915404391804522571446446307360287685541180874194017230747340469714296366692473144580866044106328054412687926763608607145115402992469241510864389904303398715911212537525890928430777348992540531688689809026381351452589218415928323050787436722024822344489041655243811329258593410810676710888133809893625811647034785350548384843102870308296930311022581353715664752370713137468731141004583068505199340981746502534582026689534238212227226361618922161037369979980745505781971260207678147914364585778305530939143929886244370352023240775388415689483811215382769460112122789147029420828243112403792270955625983663450604009016269476216348776306035456986392398459410653494837397977725813508830564056437647735713828617218626413484122108268304149907013779330973171781259905048100781749478157115100996260142560273981664034621791856115728093914395857650124982835316396072780991273157527150388283928253158801111257947868668664458829423791395896356798076345206569100774621899265527838043199506325920220679338376492920061643038855487180460651042799169019961759467205255898882534619732847374243582514878038771250636750198006701714898921214004858382951480690735331247635681944718135141690266802959300977660550363597657158443076920597453658812551863504848733150226677383486805208935193019313238803727037674819445304611467276002686233552231527183416289805457102873326759146561783165035045029913506936452826848998689917069084677067179020117669304495510404287188987957800305761210620382376106715653013367519291480380110589823425347859641957117649059232891834975084081819210643970673035703215041585329555307066751809934434623574501932689556764221000237218906326733108832251170200825247660940313970838025923300231571767407750276687247874181202309146058460044679218645747007908727664327359601989059833559079478379574991843286004356773842294276530555748856461199674142308462488942444910254694393776299728885907347184076721801902502777495921801071831815049133582670534057322374975083646427417147049960084917885990981790021177140677933626954355873173254930911873573300251946171669981019241446523622596736511211690016151255933889728490753628871086606789324577901972034364178751042592092476519621133042278918065325303003173574995638052035722754373912695636402366937088263177161243215005838822748145075877477157069076119293073827183149632659528119775056751758895623185703508503546381365205420614892640606874286662226511223533717772148696450600929770523236263151070920975309172122015175596296205340152735722515697338358971132623190723857664820347631949641962186412233196496624698581877575062511308487363200461771781979861292178249671733308758945772501326780386895903073338855479487325538085905418604036505267199329077357747107527483177003058143283192861156772344806115033003296137313648001143037361682912814455985515067298461962971082103757367563515543932361553407745844146736372963116938317904369977539827457241051604332946176811678445489986544236914406068653665324101780904692591295651112172859084303339289135809844668516567261679480629333728091333291005060571015606239783015293071116377214017709808383808785188253293736965129076072839237153841764514140834090106980691687093685386329163326589496344563737655288134022750917956489603313821546503146763938347818665611106424666215363140474579976074239205062904247144810867569830385469380425324767227458866943167457448044295663449492314168749207083335495833342176230507927863410401127555780643816372865007817068382260255034857682979490436093561153215023198929965385112862332342183270147537980502839024300142759068231866431060202489810806093394703879891527572368817934633189118116114055583360483867969934462950199442335136915820024132770765207469319794625227131028760631198153172394602581336681125575471043563921003291052622596494643901439282313936310190061901260020839433336325332166992288170271663490406827304546174960835063099610982102008526892134606202574018931372386501304545921483533286364518856884905330806918441273888443839326794010363022419650081888803447425478465689624805483066388161268224688218603322687278408880140743370645715507801699996214827233059380139201407602907154158832710803018663554496201368657836719854458606600852915135284854199442419726463874636337361364177963694119818525387836544962622357080218376837314183157523610082864837728052058413813761443998812122292698424271638838165573235429710753478773326286060053454819231118116087990861260866378570621943961208356500669476906502797920622058836428284760512301628670578830807605389062774854762812437758889576060280896000510009092548625550148543896739622184346427179960520608681193229037215561298109491762754070211063551681201161507716061729012492284363555647601351609678369878762467718633429394779153795564501413535813120081108103357382637761465805916854186991400790268433974769760910085595710626889065535672499395298223606196240708577821887647088230233016232733541791675723580295898607332084771809090230383846950307469597196643305038167770174146645398697742665449422692478257585267971751650383941109863264521663470331198169066336340770206089416819057913690718845188841039182563980949854282087174797340762430281352796099915608131204602887301485493775192990987202621060682397769496571477747278790445874418322097558025431397348820242048883153170001634380777886351690569153456974563731474584524355641292081702717529778761865677937088429728147932450185967379301774757735811755533126890345106282334967226244201393044618342535401073257252300732476816376615378041247216573482240377397146436509625767524382593378889771518553664555095665073939387801580534136717598094689902566374029226261558545957281975590711569176520258862897844286491111882103104736280178319461122397432564307011767656452750659055428564717095823394337079572656218718457355321139433598696697733412016294398107841158149071762593035188254998113058178193633913684254369258405609801865281943359138769987994906531538918475907988410275579086827970562280780085694260867298857380021742233798751379310144131054463172610534020715483722930908531872121667901174708182230963461885155461924832822038219626794842604221509373914573339285680191860716480959344089489961055684589912865556800162105553194536740591399537697764782539235669281375677949928795897600947757163822474978369946931863881541533258385471131635539015020913773115281564851485216897705391935440402562662785204179430485029458012260484576401877842477640373726392042313121983887492139506261121138603096020830290298497963352959933557404924100454437329371997835217514575419755937438689213055925112330589083831523761177440800446693948817829480536804941478169672602351070303387289803783153160412300722768716177251445093655145354701072893636515630759254111164994756083664183065585027991411228715757996930068439489811657667064468027014509841735606426460896926522624742301897464595159547580234720516771855275461173628908473372810271038308761399143388856649854845542595870173769840969693075278109297920644568236946209702397720699128736278548928293529346401330103539660782013314807574390918536666018808236282064784392265911997366049075648172454521177101478566357411194419177292903098525039800416137000095012746350079056244393179117951504334146134637699504098520462351011648333596295970232965134619683788516024658465835460477625787324506212728431818728912382164165733411426610835036231693051473373636397959729023939613496698835496447985136045121317400696943349340383162731802560900097239479630150217198982481206422818930078341027624866254418195503981167774985150221614007861308768335978523135297589092582429225186278475993787325969619020117475418233910901629589851311252962879276411998527935037628397615783903160459737418223524590378898999494398675013089357602967335342987120231243747879331477470788272726379045872452853159062826243266321176164651330778846091448367350959175812365799201084340762366992062628823702327478710902489241165985762580520383386191511886480612118079561372844551377965250042258045287929115078752819516036927255060452775241182068122323638285941948514413654935479412507475611611197082224909422570927807454896661387807079177192419818136719053761496080023767739871654331270034268481767885155148804667628167688703179842828794373293895039135541108006099998756312190580651374518575473205738001583713565262328332050912139331342632583292295151881350492141121802362786999977050634984809102413160839998933417243822579358903065638143268062206729101261903823118175493829550104717782387076682423966293118074182263062958037866459441070413324782345835189772690819309762449805246503687363917358310969354766046018125457165118483450699827484134985046690589871307357982465766399259100349384598890533861870116086205797571195766542329123485028437105714000881039295294939691240075402302202187083546314075669533505286456693405803764646645409103726706223117304059492885045549416518304240759149309384422701265819079436915571131399144309809899616035254764651782442352410149201358204375381454178249338698398281109483407406293159821250781212259048318636652688699930485813119034987618318463622935016173061792924166045979876418438757687782336355299086952818488822381265254190807179069714437628724131538575137944409922066071939466012167568422569423408543263070195891369149413630527826217070541656933675107742568014541889115640201268974840956548519709204842649296262341759174437419585147403348746932923297489870356234770098600487566244982903984150320289260315078650904492051688316432060681059079412715542775386423141543396058268185244033926988599840341595383614394328032374747642910663899508542362260134157973497472067512058429484985427631616490812365901683007671461836163897503839530384547869806442316086862270606820238447469433836385330341401391256548200736768968738330970588182333759965175626044458712382072535009218353883043055891232852386955462622711165578287990410964319994102475474200786372538300216052917181369707562907547818864447148108607997685184996682007917177683869412892677296927482280554152091331284099451717864022420907735141478054101901566940538400546725042954081234086179282770218671800943246239154995275658741712683735090517865687069883722326824388245241062177652893985018435304481151419966072105468549032495059507990503020207959738094776967750915497836894111912254759408132163929437995733070555769340759068065344007837087680009065391207700666778645442786110187742488452306697683289208616929554680212279086173928397800761635623882545219340450348342554012438753245605840551216071131048432603831167817629721799093537375458356183749039983000437906976565594229879614893542144823195799530270880715552026777895845120241131933564773671314334363878932510064642317967995943695448802099202234508041675219118113911055909780791522605702311919926177216017302412636119403927236629768267835811924021669938359538472481146142442561341149588649325824243159078368344414478389009833642148112996573360368859814892961602160061270470002073863477464485624813348397229733418650811021598984760306492921165667400212124069434880353182697182516947454281434391049493364076830664284609462117023639384631368108861941042588266583927224051444266178959353441097383083310147121640518827225774313181924120819528693554195904846386833344374631370380996412260667074685711230340633101299979222019965859007725066024815346901197706163191598777026649698342759979618464008207010127135841947626187306486964847371868209186542812936360620309633212078332464340050806757505983990607628149487792778366838949469196564066636989542049551005504983216476019938703059333920063255339761507169277465466425444785386670903184800573934187334904763828198895364186717334744125402399730250454834026559738394976469557083327481619692958450958655788051180342291051694290915282721797170652793775914827356967609661241542385042369785520221276622335248325298439024542706295217876488435967895033637943019927600547046270506397612465764179950748809110826991881782208803607936408925009042163241829716791602447160433378229687779857540946369817744829102727692277614148569282316438305754411062829583424634371281012538583099002203387074251366312871048505301368412737312239624839314529991622139008075412506605499524506320106910291630295278465906120946570116669088545374323925020714479340755516250882097154230710319029733962249639599709305526491804400172727453980814335261935590572505527653052520744002171987346832483749482291334353613146163967658876207165741773621735252123865482260361853229372798590621064407176966493746479396649150934407333422181318117918307335732217494881344510149396789329724016307953705855471654030019525709429519349716169106324237669691515589325148118362865793029319045632371368848286259395456344597512461581203352516121269132810423532451685550371571639770727697766886061371560739565978352074019603726824356526279998549638892325632427480633104177531939041152825547180861587277203953413030012688");
        ANumber result = Function1x1Service.getRootUsingNewtonRaphson(f, ANumber.of("0.1"));
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetRootUsingNewtonRaphson3()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (x.addGET(ArithmeticService.getEToThePowerOf(x.doubleGET())));
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        ANumber expected = ANumber.of(
                        "-0.426302751006862745673236226145458636868346227962147081539900408202764190116761107092636542052683909941733440676569146096395963284829878971944641902493144583846189737968085602202760293574581802699806537183782668078363065210779647499973309577379851292878857508165973684148014619459509140683464755962894072363478499787105388106436569888816338622896498699261278421801671606786853479096061060025292758558867930259041534196491610247372016360700894069387505738456758042797909947878787817741558698287012091193700519377182391307476354853553282358030893634768977669650868736050088416718503230717052733578388030058186669668767798751592981761663625610074993887024033711254178619105986221378010148263222834394934669485935689359460581589847737198709627544172178229767349910917696251391934949455487089023242005238985463557811895014483956042288329116993887964990829033444572170466985706550659286199494898284075109238379334826081150120987686813815227593744851966935352633483795669070413347952150294868616294736576973");
        ANumber result = Function1x1Service.getRootUsingNewtonRaphson(f, ANumber.of("0.1"));
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetRootUsingNewtonRaphson4()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (x.squareGET().subtractGET(x.multiplyGET(5)).addGET(6));
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        ANumber expected = ANumber.of(
                        "2.000000000000000000000000000000000271041783566403768701458716474762287425570155131839779369494273177460651208937967897588475825439691814847300971243023788231339346161633415500533288000076481811380270704838565192185524734123155740778342528788282232815051069314963150612211010454830940406499791037766376786973092897416010607032560341527362794242613635555113745372190889206210844507604929274221089472725348878197426987565502656755142069690151430912805925907846725010519164083453265081085613992275943094449134060853852865904511640735129977158484857604144620945428685238095193435724498920047555712411649808093829586906694586611887062501915988918814411251912681692817284096283420522683683261265972877911460133842731774359774585579619269205273736337241720606369869880834232430847170097542010380118992026945301001210542917285493946816275212822585781830924796110111330410000145265836232673604374943173097574121869224665562212750465611843736936332223441153608519607158179891387193550175247192581590564425363153997151144456349108634323749002439198089506129944453747126211277195141802720544213276161247955348707020109359915414603281686891050287123401658211721487212655357314251310962526778277864974640555084098466192656685688998783614015500605236361175483719801485425596126539910294207192782051077625786634348164391624878970770254089959934037823879485276198857420164655065269929382733978916816863544293550715146053104636562952881379564942798485891757242248470398975818595979963284294492873474822162731020516217305534621457404491595980439826316426696444006856979572549822969722001873090325294880438556762917220236085818385950843071738585171986853756629614962443897207528828334780713002489231264599315635358219896028620741344708795783663201014801888622612751564515418388663377560156395212961519215566937229464288810016739517523427460423572159845380597227366358223622554977908685669210228978945659902770763987936304044516791965034804875429035761390801401958392620351637088721377340079667245779557369666102618851945387567088461818365177874011481599145137448964520712146071354785884485102069509707439673143026029700706374210020689079428818532644240872264042585327469544581869700836865625083729526034222809057222893719895159404432625484959118432500077011220402163586836193488956994542480963779155657197960695844026515035549302499190881516475646589084261619940853744374237673707326899676800599672156840079045869315599801967255659827790312699269895806781008031481985422021396095842403292707520028761773326504781716406305380431195048412723749734934648018484416562999751131765423898223448695150248940653072185945301843533504292782352493065130861048113594194999350766300024683226733920017099829742313153915277084729832872704062091312877175153943569706360010324245676755983030579772405354280430309526830357854728895135686890469140032417637985917858631223373556959378947042908110735379846467832640228488768824685956979926408278741817339831453207661564328426582650090732534841087891853147503359021371631057954917794080188784990540960278893774393758870820112427943037623542630528320195301485825799843414987436743910021461716323343364485863914049770532123775900089294703404898553849662386230304349470559537078383329825431298870634061287030452595438766899450632446677829434895043922498287069045274240647138198905767858254212891428256169588439572997606208583390166548128369579251381730351590787058655781413499278713035310662917138893992535570849364954420481634760285016786418205825023011423384836454442201987274684538765711349166108677249619625615646240708632087676435846950813073466902250311547926888815451258615181698257571647044752004445995251001540501832532996630053952927418619243470112894709431756167515575661539847129169454716615692436884064569422907896141067270500875838686362031993121000053778791990015233133544902466276402065698922101121902720071902990353241963102559712309536928934605025743226106745563130570810911053043226524371026101069132162234917275427078242121496554467597803711667991047907299615528756659535175250328641999436736911954420441153414525448663379544391073669261840496321698655966487465580810084936789603029700522079038292352172366764960324045949075316670556451102121947689548260774133700403868870124016246638980763963034061117700441394229856174649617890757400516429199285260493115563690544958619977441132365157624464833218292562772854679058609541820910951795292519405041023887073122636581343346318896910215693231895425315588609320172923195393515997466671055133309482287746054810258568172409473074445905937519440200322432364459926061549044229914972604792600970178274830719469097585056563986541236342220264276083312736444637113035240798108601700629544478136193340058523304638211545556982391946356981615954735367525524348859489439991225435898040223145062443552109498093172474771887646104244840164050541527403132931150704206654659375561241191290600017220404403514255062285578536258412552290773761426227406345770498042883857570505397329679046562642124169239399411410686399763279780493163911091917928234286131726682236801047844966925635167075728576086574745072891264015573651563846457738630018654640501751709866739216035601595726087528885734463082578941143610267724079303368744116995193399373691819334513295099612139218710893580013226789141969453945247739445038100967134661296315094784906629951790107275809717490838977033822588478973711990332300560840547110286933242212180016164046476490857050685619802399675459139831157869142420419269164925379172737863528178860824919549676336561372163411355472930103781352878877015013936266297110132999683551839024711734685622866490526153585766801253720838649521328211613960979655988700625656272495402110188870184301493065508555242308336651487648020470975914384253460076235061083851509145058381381226986520646690861285759912056124255149089385353144267100316640057213653058336042885448389309685579211163080221706858637901541258020953066290555395939843110146845745243702623454000964414190347306050721710530990435871519270457474017904495253764219500412764984233482550649919131136893427430661802554335406998408340621018903873195251251824106690021847819916214842609624397353917703656842180603223770377882717225214963022561277458868788580239796788953249879314068278777568278802654303946717384213678883939138806411803343066736147149564186022724600941064404089650915126226592261489033845126742001647255634456286373593747295574441346234773982974335384021491209514515772596138550393389611686052003368778724002775380036224862397444082929388276009790651988866580702263317944180862009174442878927266870235604040002175738549048490753168696935636921129320240806364525315855926072432562591017116668090600588745110027157930644929221199068454372874043719343226669020245349004245394551965096798647782660461242518569435632913357643771495654176740246679361123159001879276980280758458188703471664265162972345087685807803001189462857159952739163023767738284539730239738811147666601488533250222929238774550060863526559302583071997620163898963429052968770262512407084521418494854040847323161554120860703961381222156118778606976425491289535025597531814615761751079298655578449604069509949205548172444607480757174941867533344033639162119117448690577008980660182631823836260841602655041536187345988990975856997703734344755163653656195066077160779919632993317637312613537198503934620820842510554792247436317591697941471785322494109599821637977703656201764123866631426968786177740438849982266707920585280833563492587999860283871103090155568958416005842906851433330714103099515486402288678879635471187364727259481385016088402185884335909044795882227338917592467908483992742584949617803251454774626671141405325039159645635663023292661932358876375961550932609235817568898613531873222049612944575604063685977083154457840502031825849238123946141061444237810041934302042225743120572237425113120084727318403314985221296767553272244715049934680255313329023859711541484115211754805007529171406539227091551027416650696734074813465615412261567728513300835153117764256963051024423564068863615575244177702337762019073063632108204728582619969729936515562650198237145505617329309159161091054874545795718978247063498194958992764508240852417239706593446169789858369436990630297293473133087587817567025976912373988489434517356302547294227349660698116791281054065380069300549991598114565330627311692335765417865200253337856018917857777327076182588980475263053141127402661865838870209636193659748414942060313797001861939177888463405076383885200955886199483008014302761010984649708497964053286631476910236145262074811377840500399437734501074842771951954543154517588962205416765872886923171027904792915875235303514421613662943435948548122749689621892123844364532157244706748928957421584897895943742610054885772164818305577132963830605091026937258336056157077318935670698996264598490558845669046174132561765220322981545681805401532826760641654066004774807109771467704845431056231717893132319689264713708955568821208458304204217229198032818308513190416930122436020453269790478386943629682608863649284608656574870618295816546591315258547470818193552471094923200490812176695362885838782735131874504053990137571275544182529107401104039797478485503624415228362876283373689565121668095716609625010201729803917454713661716619924515292703264830408985238233651536332873824970384826257687411873936770982201690824825523201459294337317631285641849749417218086847468925336802859295338561040057614288325661522237109670772357315930794935501790341718152487688740519022476603946912567744692568637809917955345908483042756574532718411407745065228333451458784593996107419232719435296720457102320419902586050505865479686530089081225207829041296577689595177548225371478626233460631750243862037309359390695280227365043752405478296348651233878545432586556783053885457772353068505221782515491616784303975904882120411450411182528817870423169886329434652091427650930867709498818197745193995560418997401396716408971698163791004607601937469465621960437872268166463817841070062351234421539283090629337450677920194512703388381872756417634324260706951282422563428067441473489317304639846768594924523584769123119086234600096660604050591225755285284129649136366018854762822230583257609080853939148817543434248149773785178428398503102265928797047400498762316650260336337498464287306325726696934389142949125756694087097558622714478082455254389891957054902639002207384746847041245005221825579504931410212297472327801743525888407199199094186969028198684639755192857733343675637698453148061044402612208266555083868568663731237943120552979001328278246967608838359050626880639863156336627971090029353989779650853275923480161539099345927274068419829251988233101738702025581303703127345180428119028932967193331301631219628439068663371987204604321967745753316486949131298890602974680754820916117876721848657752096730594042829185285014913184606902159255119240805332605827474469189020101335178043117228369573120008373301068844553034220267328053591097711670712970818253075894735023536121991997729554068326439249142910595863203313205916729597640417893209436489535222845946624314743087591795846270224257754426721675622030430056017176182199943763535042688227988642786363614328302310582501500851774206548480175043788679433226323473765752479576383838235183343813297969216261276558056060242065814921916319107281486643678685895463816115530174429154472442832140088988712538167987561397624975344269371511571811941739869669220281938238662114113892944708009249809134392466497373949904999553559425923291106306768438310380738053026000055203044690474766296149019439314715587874804465356112424194457650831270518697068841737647097621334661898601218446311441727955593530249238431917897296168754211220455958778681844225451445948767589659414595806054676032528662225639618195355271333196902138397570629949927115896226690485374832229520254994621191791090629590623021574304049241213528225938449384616593311611434803548188723762291411675971285736367271161749991836433095954276110957271589055227745171313480751161136045878618762198195834738638120745391747131322584427533847940589553019497039181116118439510309117887943227658984427685354182011244915417818225504162523416590946207422894944330039211056151723932085744261175472506373113464843233308892063162146329426897657988663426848864366140468164377224302211964685152240422706065353876676131926772401621759275576633029697381509202978983994510939999814946086963370351034181497377771600008676262276639541381251171007560219734026513185774336887135617124213248915195054624897398696032065484590505432849807019011011026256576848526128020661996666147881456671760703871366137191435948996454607993883075671937974284924476597229581591915599987981203340555727990381721697915373315485984476865229380933774147518464486086090844956991252566235326591868761997429459211888997636417738656423143619558555184753051809961242736466831629253982732310089297971594576028834390990386678741002823651863297276981983249866802323231939498494654873678759276385354055863723776621166499646274566661005415502063340045620811542956666084569305609316905647120291837452255566197484352121304095411569632683012130035323016502931004813055849643283452334607924632591998847266892372113615150605829741546428201882084164113613521899058962289664019941712400415117048867709190503223330975984064804961574579539914713087514518830331507792681247665255964749596663932077009837737679257982082757472861899439195913669923675810346004454615");
        ANumber result = Function1x1Service.getRootUsingNewtonRaphson(f, ANumber.of("1"));
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetRootsUsingNewtonRaphson1()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (x.squareGET().subtractGET(x.multiplyGET(5)).addGET(6));
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        Interval interval = Interval.of(1, 4);
        ANumber[] expected = new ANumber[]
        {ANumber.of("3.0000348884154425882561953639967092033476418746737870187276570354015"), ANumber.of("2.000005198346704364587093609648994433469157425931765111019736252177309202210448895172616842806623366724285661915070269852707498412210672830586602544310098161263509")};
        ANumber[] result = Function1x1Service.getRootsUsingNewtonRaphson(f, interval, 3);
        assertTrue(Arrays.equals(expected, result));
    }


    @Test
    public void testGetRootsUsingNewtonRaphson2()
    {
        Function1x1IF<ANumber, ANumber> func = (ANumber x) -> (x.squareGET().subtractGET(x.multiplyGET(5)).addGET(6));
        Function1x1<ANumber, ANumber> f = Function1x1.of(func);
        Interval interval = Interval.of(1, 4);
        ANumber[] expected = new ANumber[]
        {ANumber.of("2.0000000000026067638360780292976942279208930151703711115879724199243349609806041773779483540527587430081594872430181875264116282179870035092525439728856226347670741969648457637554272843651747541588895311832733898037511501857793117887418702811062022715112924837081452976562277382975513386425312661589413488831138318986"),
                        ANumber.of("3.00000000000335675325991617471391278374613919773812124659353790785337357990220553918801726743598369617872093688491740099856329869487170024544128444046158767307154235486721570851143799260773024522991646995435432265493847234052142090500053501431666166385456331987292920767232097218514803193691174897784573549493460820399458")};
        ANumber[] result = Function1x1Service.getRootsUsingNewtonRaphson(f, interval, 6);
        assertTrue(Arrays.equals(expected, result));
    }


    @SuppressWarnings("unchecked")
    @Test
    public void test_multiply()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber expected = ANumber.of(40);
        ANumber result = Function1x1Service.multiply(ANumber.of(2), new Function1x1[]
        {f1, f2});
        assertTrue(expected.equal(result));
    }


    @Test
    public void testGetPipeline()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber expected = ANumber.of(17);
        ANumber result = Function1x1Service.runPipeline(f1, ANumber.of(2), f2);
        assertTrue(expected.equal(result));
    }


    @SuppressWarnings("unchecked")
    @Test
    public void testGetPipeline2()
    {
        Function1x1IF<ANumber, ANumber> func1 = (ANumber x) -> (ANumber.of(4).multiplyGET(x));
        Function1x1<ANumber, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber expected = ANumber.of(17);
        ANumber result = (ANumber)Function1x1Service.runPipeline(new Function1x1[]
        {f1, f2}, ANumber.of(2));
        assertTrue(expected.equal(result));
    }


    @SuppressWarnings("unchecked")
    @Test
    public void testGetPipeline3()
    {
        Function1x1IF<List<ANumber>, ANumber> func1 = (List<ANumber> x) -> (ArithmeticService.add(x));
        Function1x1<List<ANumber>, ANumber> f1 = Function1x1.of(func1);
        Function1x1IF<ANumber, ANumber> func2 = (ANumber x) -> (ANumber.of(2).multiplyGET(x).addOneGET());
        Function1x1<ANumber, ANumber> f2 = Function1x1.of(func2);
        ANumber expected = ANumber.of(13);
        ANumber result = (ANumber)Function1x1Service.runPipeline(new Function1x1[]
        {f1, f2}, Arrays.asList(ANumber.of(1), ANumber.of(2), ANumber.of(3)));
        assertTrue(expected.equal(result));
    }
}